
on_actions = {

	#ROOT = attacking side
	#FROM = defending side
	#fired when two countries end up at war with each other (on_war is fired when a country goes to war against anyone and is not fired again when it enters war against another country unless it went to peace first)

	on_war_relation_added = {
		effect = {
			if = { #Trigger for Battle of the Capitals/Cold war set up events
				limit = {
					OR = {
						ROOT = { original_tag = USA }
						FROM = { original_tag = USA }
					}
					USA = { has_war_with = GER }
					USA = { has_war_with = ITA }
					ENG = { has_war_with = GER }
					ENG = { has_war_with = ITA }
					SOV = { has_war_with = GER }
					SOV = { has_war_with = ITA }
					USA = { is_in_faction_with = ENG }
					USA = { is_subject = no }
					ENG = { is_subject = no }
					SOV = { is_subject = no }
					has_game_rule = { rule = FORCED_HISTROICAL option = DEFAULT } #Not very useful for competitive MP games
					NOT = { has_global_flag = disable_peace_conference_in_europe } #Will add option in menu later once Post war Asias done
				}
				USA = { country_event = { id = confer.9 days = 1 } }
			}
		}
	}

	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			if = { #Trigger event: Post War Eu (& ME) set up for Allied Win
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							tag = USA
						}
					}
					FROM = {
						tag = GER
					}
					has_global_flag = the_cold_war_battle_for_capitals
					USA = { is_subject = no }
					ENG = { is_subject = no }
					SOV = { is_subject = no }
					NOT = {
						SOV = { has_war_with = GER }
						USA = { has_war_with = GER }
						ENG = { has_war_with = GER }
					}
				}
				SOV = { country_event = { id = confer.202 days = 1 } }
			}
		}
	}

	on_state_control_changed = {
		effect = {

#####
#	TIRANA CAPTURED
#####

#Allies capture Tirana
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 44
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = tirana_captured_allies }
				}
				USA = { country_event = confer.11 }
			}

#Soviets capture Tirana
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 44
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = tirana_captured_soviets }
				}
				SOV = { country_event = confer.13 }
			}
			
#####
#	SOFIA CAPTURED
#####

#Allies capture Sofia
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 48
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = sofia_captured_allies }
				}
				USA = { country_event = confer.21 }
			}

#Soviets capture Sofia
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 48
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = sofia_captured_soviets }
				}
				SOV = { country_event = confer.23 }
			}

#####
#	BUCHAREST CAPTURED
#####

#Allies capture Bucharest
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 46
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = bucharest_captured_allies }
				}
				USA = { country_event = confer.31 }
			}

#Soviets capture Bucharest
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 46
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = bucharest_captured_soviets }
				}
				SOV = { country_event = confer.33 }
			}

#####
#	BUDAPEST CAPTURED
#####

#Allies capture Budapest
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 43
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = budapest_captured_allies }
				}
				USA = { country_event = confer.41 }
			}

#Soviets capture Budapest
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 43
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = budapest_captured_soviets }
				}
				SOV = { country_event = confer.43 }
			}
			
#####
#	PRAGUE CAPTURED
#####

#Allies capture Prague
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 9
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = prague_captured_allies }
				}
				USA = { country_event = confer.51 }
			}

#Soviets capture Prague
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 9
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = prague_captured_soviets }
				}
				SOV = { country_event = confer.53 }
			}
			
#####
#	WARSAW CAPTURED
#####

#Allies capture Warsaw
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 10
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = warsaw_captured_allies }
				}
				USA = { country_event = confer.61 }
			}

#Soviets capture Warsaw
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 10
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = warsaw_captured_soviets }
				}
				SOV = { country_event = confer.63 }
			}
			
#####
#	PARIS CAPTURED
#####

#Allies capture Paris
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 16
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = paris_captured_allies }
				}
				USA = { country_event = confer.101 }
			}

#Soviets capture Paris
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 16
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = paris_captured_soviets }
				}
				SOV = { country_event = confer.103 }
			}
			
#####
#	BRUSSELS CAPTURED
#####

#Allies capture Brussels
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 6
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = brussels_captured_allies }
				}
				USA = { country_event = confer.111 }
			}

#Soviets capture Brussels
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 6
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = brussels_captured_soviets }
				}
				SOV = { country_event = confer.113 }
			}
			
#####
#	AMSTERDAM CAPTURED
#####

#Allies capture Amsterdam
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 7
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = amsterdam_captured_allies }
				}
				USA = { country_event = confer.121 }
			}

#Soviets capture Amsterdam
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 7
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = amsterdam_captured_soviets }
				}
				SOV = { country_event = confer.123 }
			}

#####
#	LUXEMBOURG CAPTURED
#####

#Allies capture Luxembourg
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 8
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = luxembourg_captured_allies }
				}
				USA = { country_event = confer.131 }
			}

#Soviets capture Luxembourg
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 8
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = luxembourg_captured_soviets }
				}
				SOV = { country_event = confer.133 }
			}	

#####
#	ROME CAPTURED
#####

#Allies capture Rome
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 2
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = rome_captured_allies }
				}
				USA = { country_event = confer.141 }
			}

#Soviets capture Rome
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 2
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = rome_captured_soviets }
				}
				SOV = { country_event = confer.143 }
			}

#####
#	ATHENS CAPTURED
#####

#Allies capture Athens
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = USA
							is_in_faction_with = USA
						}
					}
					FROM.FROM = {
						state = 47
					}
					USA = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = athens_captured_allies }
				}
				USA = { country_event = confer.181 }
			}

#Soviets capture Athens
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
						}
					}
					FROM.FROM = {
						state = 47
					}
					SOV = { has_war_with = GER }
					has_global_flag = the_cold_war_battle_for_capitals
					NOT = { has_global_flag = athens_captured_soviets }
				}
				SOV = { country_event = confer.183 }
			}
		}
	}
}