ENG_naval_ratio_role_pre38 = { # make ASW
	enable = {
		has_dlc = "Man the Guns"
		original_tag = ENG
		NOT = { has_tech = improved_ship_hull_cruiser }
	}
	abort = {
		has_tech = improved_ship_hull_cruiser
	}

	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

ENG_naval_ratio_role_after38 = { # make light cruisers
	enable = {
		has_dlc = "Man the Guns"
		original_tag = ENG
		has_tech = improved_ship_hull_cruiser
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_tech = improved_ship_hull_heavy
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 5
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 95
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

ENG_naval_ratio_role_war = { # make light cruisers and ASW
	enable = { 
		has_dlc = "Man the Guns"
		original_tag = ENG
		has_tech = improved_ship_hull_cruiser
		has_war = yes
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_tech = improved_ship_hull_heavy
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 50
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 50
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

ENG_naval_ratio_role_bbs = { # make Battleships
	enable = {
		has_dlc = "Man the Guns"
		original_tag = ENG
		has_tech = improved_ship_hull_heavy
		has_country_flag = bb_construction
	}
	abort = {
		NOT = { has_country_flag = bb_construction }
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 15
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 15
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 70
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

ITA_naval_ratio_role_bbs = { # make Battleships
	enable = {
		has_dlc = "Man the Guns"
		original_tag = ITA
		has_tech = improved_ship_hull_heavy
		has_country_flag = bb_construction
	}
	abort = {
		NOT = { has_country_flag = bb_construction }
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 30
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 70
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

ITA_naval_ratio_role_screens = { # make light cruisers
	enable = {
		has_dlc = "Man the Guns"
		original_tag = ITA
		has_tech = improved_ship_hull_cruiser
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

USA_naval_ratio_role_screens = { # make light cruisers
	enable = {
		has_dlc = "Man the Guns"
		original_tag = USA
		has_tech = improved_ship_hull_cruiser
		NOT = { has_country_flag = cv_construction }
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

JAP_naval_ratio_role_screens = { # make light cruisers
	enable = {
		has_dlc = "Man the Guns"
		original_tag = JAP
		has_tech = improved_ship_hull_cruiser
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

USA_naval_ratio_role_bbs = { # make Battleships
	enable = {
		has_dlc = "Man the Guns"
		original_tag = USA
		has_tech = improved_ship_hull_heavy
		has_country_flag = bb_construction
		NOT = { has_country_flag = cv_construction }
	}
	abort = {
		NOT = { has_country_flag = bb_construction }
		has_country_flag = cv_construction 
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 30
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = 70
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}
}

JAP_naval_ratio_role_bbs = { # make Battleships
	enable = {
		has_dlc = "Man the Guns"
		original_tag = JAP
		has_tech = improved_ship_hull_heavy
		has_country_flag = bb_construction
		NOT = { has_country_flag = cv_construction }
	}
	abort = {
		NOT = { has_country_flag = bb_construction }
		has_country_flag = cv_construction 
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 30
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = 70
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

need_asw = { # make ASW
	enable = {
		has_dlc = "Man the Guns"
		NOT = { 
			or = {
				tag = ENG
				tag = ITA
				tag = JAP
				tag = USA
				tag = GER
			}
		}
		anti_submarine_strategy_required_trigger = yes
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 70
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 30
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

minors_naval = { # Netherlands, etc
	enable = {
		has_dlc = "Man the Guns"
		or = {
			tag = HOL
			tag = BEL
			tag = CAN
			tag = SAF
			tag = AST
		}
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = 50
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 30
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

GER_defensive = {
	enable = {
		has_dlc = "Man the Guns"
		original_tag = GER
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 20
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

GER_offensive = {
	enable = {
		has_dlc = "Man the Guns"
		original_tag = GER
		SOV = { has_capitulated = yes }
		NOT = { has_country_flag = bb_construction }
	}
	abort = {
		has_country_flag = bb_construction
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = 90
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}

make_carriers = {
	enable = {
		has_dlc = "Man the Guns"
		or = {
			tag = USA
			tag = JAP
		}
		has_country_flag = cv_construction 
	}
	abort = {
		NOT = { has_country_flag = cv_construction }
	}
	ai_strategy = {
		type = role_ratio
		id = naval_sub_patrol
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_escort
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_cl
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = 999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_carrier_light
		value = -999
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = -999
	}
	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -999
	}
}