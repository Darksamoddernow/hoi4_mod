### Credit to CRZ's Historic Immersion Events Project, this based of his work
### Triggers mostly moved to HIEP_on_action

add_namespace = confer

#####
#	SUPERFLAG TRIGGER - this event enables all of the below events
#####

country_event = {
	id = confer.9

	fire_only_once = yes

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = the_cold_war_battle_for_capitals
		news_event = {
			id = confer.10
			hours = 3
		}
	}
}

news_event = {
	id = confer.10
	title = confer.10.t
	desc = confer.10.d
	picture = GFX_unitednations
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.10.a
	}
}


#####
#	TIRANA CAPTURED
#####

#Allies capture Tirana
country_event = {
	id = confer.11


	
	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = tirana_captured_allies
		news_event = {
			id = confer.12
			hours = 3
		}
		clr_global_flag = tirana_captured_soviets
	}
}

news_event = {
	id = confer.12
	title = confer.12.t
	desc = confer.12.d
	picture = GFX_news_event_hiep_tirana_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.12.a
	}
}

#Soviets capture Tirana
country_event = {
	id = confer.13

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = tirana_captured_soviets
		news_event = {
			id = confer.14
			hours = 3
		}
		clr_global_flag = tirana_captured_allies
	}
}

news_event = {
	id = confer.14
	title = confer.14.t
	desc = confer.14.d
	picture = GFX_news_event_hiep_tirana_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.14.a
	}
}

#####
#	SOFIA CAPTURED
#####

#Allies capture Sofia
country_event = {
	id = confer.21

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = sofia_captured_allies
		news_event = {
			id = confer.22
			hours = 3
		}
		clr_global_flag = sofia_captured_soviets
	}
}

news_event = {
	id = confer.22
	title = confer.22.t
	desc = confer.22.d
	picture = GFX_news_event_hiep_sofia_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.22.a
	}
}

#Soviets capture Sofia
country_event = {
	id = confer.23

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = sofia_captured_soviets
		news_event = {
			id = confer.24
			hours = 3
		}
		clr_global_flag = sofia_captured_allies
	}
}

news_event = {
	id = confer.24
	title = confer.24.t
	desc = confer.24.d
	picture = GFX_news_event_hiep_sofia_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.24.a
	}
}

#####
#	BUCHAREST CAPTURED
#####

#Allies capture Bucharest
country_event = {
	id = confer.31

	is_triggered_only = yes

	hidden = yes

	immediate = {
		set_global_flag = bucharest_captured_allies
		news_event = {
			id = confer.32
			hours = 3
		}
		clr_global_flag = bucharest_captured_soviets
	}
}

news_event = {
	id = confer.32
	title = confer.32.t
	desc = confer.32.d
	picture = GFX_news_event_hiep_bucharest_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.32.a
	}
}

#Soviets capture Bucharest
country_event = {
	id = confer.33

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = bucharest_captured_soviets
		news_event = {
			id = confer.34
			hours = 3
		}
		clr_global_flag = bucharest_captured_allies
	}
}

news_event = {
	id = confer.34
	title = confer.34.t
	desc = confer.34.d
	picture = GFX_news_event_hiep_bucharest_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.34.a
	}
}

#####
#	BUDAPEST CAPTURED
#####

#Allies capture Budapest
country_event = {
	id = confer.41

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = budapest_captured_allies
		news_event = {
			id = confer.42
			hours = 3
		}
		clr_global_flag = budapest_captured_soviets
	}
}

news_event = {
	id = confer.42
	title = confer.42.t
	desc = confer.42.d
	picture = GFX_news_event_hiep_budapest_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.42.a
	}
}

#Soviets capture Budapest
country_event = {
	id = confer.43

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = budapest_captured_soviets
		news_event = {
			id = confer.44
			hours = 3
		}
		clr_global_flag = budapest_captured_allies
	}
}

news_event = {
	id = confer.44
	title = confer.44.t
	desc = confer.44.d
	picture = GFX_news_event_hiep_budapest_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.44.a
	}
}

#####
#	PRAGUE CAPTURED
#####

#Allies capture Prague
country_event = {
	id = confer.51

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = prague_captured_allies
		news_event = {
			id = confer.52
			hours = 3
		}
		clr_global_flag = prague_captured_soviets
	}
}

news_event = {
	id = confer.52
	title = confer.52.t
	desc = confer.52.d
	picture = GFX_news_event_hiep_prague_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.52.a
	}
}

#Soviets capture Prague
country_event = {
	id = confer.53

	is_triggered_only = yes

	hidden = yes

	immediate = {
		set_global_flag = prague_captured_soviets
		news_event = {
			id = confer.54
			hours = 3
		}
		clr_global_flag = prague_captured_allies
	}
}

news_event = {
	id = confer.54
	title = confer.54.t
	desc = confer.54.d
	picture = GFX_news_event_hiep_prague_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.54.a
	}
}

#####
#	WARSAW CAPTURED
#####

#Allies capture Warsaw
country_event = {
	id = confer.61

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = warsaw_captured_allies
		news_event = {
			id = confer.62
			hours = 3
		}
		clr_global_flag = warsaw_captured_soviets
	}
}

news_event = {
	id = confer.62
	title = confer.62.t
	desc = confer.62.d
	picture = GFX_news_event_hiep_warsaw_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.62.a
	}
}

#Soviets capture Warsaw
country_event = {	
	id = confer.63

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = warsaw_captured_soviets
		news_event = {
			id = confer.64
			hours = 3
		}
		clr_global_flag = warsaw_captured_allies
	}
}

news_event = {
	id = confer.64
	title = confer.64.t
	desc = confer.64.d
	picture = GFX_news_event_hiep_warsaw_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.64.a
	}
}

#####
#	PARIS CAPTURED
#####

#Allies capture Paris
country_event = {
	id = confer.101

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = paris_captured_allies
		news_event = {
			id = confer.102
			hours = 3
		}
		clr_global_flag = paris_captured_soviets
	}
}

news_event = {
	id = confer.102
	title = confer.102.t
	desc = confer.102.d
	picture = GFX_news_event_hiep_paris_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.102.a
	}
}

#Soviets capture Paris
country_event = {
	id = confer.103

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = paris_captured_soviets
		news_event = {
			id = confer.104
			hours = 3
		}
		clr_global_flag = paris_captured_allies
	}
}

news_event = {
	id = confer.104
	title = confer.104.t
	desc = confer.104.d
	picture = GFX_news_event_hiep_paris_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.104.a
	}
}

#####
#	Brussels CAPTURED
#####

#Allies capture Brussels
country_event = {
	id = confer.111

	is_triggered_only =  yes 

	hidden = yes

	immediate = {
		set_global_flag = brussels_captured_allies
		news_event = {
			id = confer.112
			hours = 3
		}
		clr_global_flag = brussels_captured_soviets
	}
}

news_event = {
	id = confer.112
	title = confer.112.t
	desc = confer.112.d
	picture = GFX_news_event_hiep_brussels_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.112.a
	}
}

#Soviets capture Brussels
country_event = {
	id = confer.113

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = tirana_captured_soviets
		news_event = {
			id = confer.114
			hours = 3
		}
		clr_global_flag = brussels_captured_allies
	}
}

news_event = {
	id = confer.114
	title = confer.114.t
	desc = confer.114.d
	picture = GFX_news_event_hiep_brussels_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.114.a
	}
}

#####
#	Amsterdam CAPTURED
#####

#Allies capture Amsterdam
country_event = {
	id = confer.121

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = amsterdam_captured_allies
		news_event = {
			id = confer.122
			hours = 3
		}
		clr_global_flag = amsterdam_captured_soviets
	}
}

news_event = {
	id = confer.122
	title = confer.122.t
	desc = confer.122.d
	picture = GFX_news_event_hiep_amsterdam_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.122.a
	}
}

#Soviets capture Amsterdam
country_event = {
	id = confer.123

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = amsterdam_captured_soviets
		news_event = {
			id = confer.124
			hours = 3
		}
		clr_global_flag = amsterdam_captured_allies
	}
}

news_event = {
	id = confer.124
	title = confer.124.t
	desc = confer.124.d
	picture = GFX_news_event_hiep_amsterdam_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.124.a
	}
}

#####
#	LUX CAPTURED
#####

#Allies capture Lux
country_event = {
	id = confer.131

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = luxembourg_captured_allies
		news_event = {
			id = confer.132
			hours = 3
		}
		clr_global_flag = luxembourg_captured_soviets
	}
}

news_event = {
	id = confer.132
	title = confer.132.t
	desc = confer.132.d
	picture = GFX_news_event_hiep_luxembourg_captured
	
	major = yes
	
	#fire_only_once = yes

	is_triggered_only =  yes 

	option = {
		name = confer.132.a
	}
}

#Soviets capture Lux
country_event = {
	id = confer.133

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = luxembourg_captured_soviets
		news_event = {
			id = confer.134
			hours = 3
		}
		clr_global_flag = luxembourg_captured_allies
	}
}

news_event = {
	id = confer.134
	title = confer.134.t
	desc = confer.134.d
	picture = GFX_news_event_hiep_luxembourg_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.134.a
	}
}

#####
#	ROME CAPTURED
#####

#Allies capture Rome
country_event = {
	id = confer.141

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = rome_captured_allies
		news_event = {
			id = confer.142
			hours = 3
		}
		clr_global_flag = rome_captured_soviets
	}
}

news_event = {
	id = confer.142
	title = confer.142.t
	desc = confer.142.d
	picture = GFX_news_event_hiep_rome_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.142.a
	}
}

#Soviets capture Rome
country_event = {
	id = confer.143

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = rome_captured_soviets
		news_event = {
			id = confer.144
			hours = 3
		}
		clr_global_flag = rome_captured_allies
	}
}

news_event = {
	id = confer.144
	title = confer.144.t
	desc = confer.144.d
	picture = GFX_news_event_hiep_rome_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.144.a
	}
}

#####
#	ATHENS CAPTURED
#####

#Allies capture Athens
country_event = {
	id = confer.181

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = athens_captured_allies
		news_event = {
			id = confer.182
			hours = 3
		}
		clr_global_flag = athens_captured_soviets
	}
}

news_event = {
	id = confer.182
	title = confer.182.t
	desc = confer.182.d
	picture = GFX_news_event_hiep_athens_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.182.a
	}
}

#Soviets capture Athens
country_event = {
	id = confer.183

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		set_global_flag = athens_captured_soviets
		news_event = {
			id = confer.184
			hours = 3
		}
		clr_global_flag = athens_captured_allies
	}
}

news_event = {
	id = confer.184
	title = confer.184.t
	desc = confer.184.d
	picture = GFX_news_event_hiep_athens_captured
	
	major = yes

	is_triggered_only =  yes 

	option = {
		name = confer.184.a
	}
}

#If the Soviet Union is no more then erase the superflag
country_event = {
	id = confer.200

	#fire_only_once = yes

	trigger = {
		tag = GER
		OR = {
			NOT = { country_exists = SOV }
			has_global_flag = eastern_front_peace
			USA = { is_subject = yes }
			ENG = { is_subject = yes }
			SOV = { is_subject = yes }
		}
		has_global_flag = the_cold_war_battle_for_capitals
	}

	mean_time_to_happen = {
		days = 2
	}

	hidden = yes

	immediate = {
		clr_global_flag = the_cold_war_battle_for_capitals
	}
}

#player can stop the script anyway-->check if can be removed or as decision?
country_event = {
	id = confer.201
	title = confer.201.t
	desc = confer.201.d

	fire_only_once = yes

	trigger = {
		is_ai = no
		has_global_flag = the_cold_war_battle_for_capitals
	}

	mean_time_to_happen = {
		days = 2
	}

	option = {
		name = confer.201.a
	}

	option = {
		name = confer.201.b
		clr_global_flag = the_cold_war_battle_for_capitals
	}
}

#LOAD THE SCRIPT
country_event = {
	id = confer.202

	fire_only_once = yes

	is_triggered_only =  yes

	hidden = yes

	immediate = {
		clr_global_flag = the_cold_war_battle_for_capitals
		news_event = { id = news.1315 days = 30 random = 30 }
		#fire_the script

		###Iraq
		if = {
			limit = {
				OR = {
					IRQ = { has_country_flag = coup41 }
					ENG = { has_country_flag = IRQ_coup }
				}
				NOT = { TUR = { controls_state = 676 } }
				NOT = { IRQ = { is_subject_of = TUR } }
			}
			every_state = {
				limit = {
					OR = {
						state = 291
						state = 675
						state = 676
					}
				}
				IRQ = {
					add_state_core = PREV
					transfer_state = PREV
				}
			}
			ENG = {
				puppet = IRQ
				set_autonomy = {
    					target = IRQ
					autonomy_state = autonomy_supervised_state
				}
				IRQ = {
					set_popularities = {
						democratic = 25
						neutrality = 60
						fascism = 5
						communism = 10
					}
					create_country_leader = {
						name = "Faisal II"
						desc = ""
						picture = "Portrait_IRQ_faisal_II.dds"
						expire = "1965.1.1"
						ideology = despotism
						traits = {
						}
					}
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					if = {
						limit = {
							IRQ = {
								num_divisions < 5
							}
						}
						load_oob = IRQ_1936
					}
				}
			}
		}

		###Syria & Lebanon
		if = {
			limit = {
				has_global_flag = fall_of_france
				NOT = { TUR = { controls_state = 554 } }
				NOT = { SYR = { is_subject_of = TUR } }
			}
			every_state = {
				limit = {
					OR = {
						state = 554
						state = 677
						state = 680
					}
				}
				SYR = {
					add_state_core = PREV
					transfer_state = PREV
					remove_ideas = SYR_no_join
					set_popularities = {
						democratic = 45
						neutrality = 35
						fascism = 10
						communism = 10
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
					set_party_name = { ideology = neutrality long_name = SYR_neutrality_independent_party_long name = SYR_neutrality_independent_party }
					kill_ideology_leader = neutrality #Check if works to remove French and picks Husni al-Za'in then/ Beter change to character
					if = {
						limit = {
							SYR = {
								num_divisions < 5
							}
						}
						load_oob = SYR_1936
					}
				}
			}
			if = {
				limit = {
					SYR = { is_subject = yes }
				}
				set_autonomy = { target = SYR autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					NOT = { SYR = { is_in_faction_with = ENG } }
					ENG = { is_faction_leader = yes }
				}
				ENG = { add_to_faction = SYR }
			}
			else_if = {
				limit = {
					NOT = { SYR = { is_in_faction_with = ENG } }
					ENG = { is_in_faction = yes }
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						is_in_faction_with = ENG
					}
					add_to_faction = SYR
				}
			}
			every_country = {
				limit = { 
					has_war_with = SYR
					NOT = { has_war_with = ENG }
				}
				white_peace = SYR
			}

			LEB = {
				transfer_state = 553
				add_state_core = 553
				set_popularities = {
					democratic = 50
					neutrality = 30
					fascism = 10
					communism = 10
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
				inherit_technology = SYR
			}
			if = {
				limit = {
					LEB = { is_subject = yes }
				}
				set_autonomy = { target = LEB autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					NOT = { LEB = { is_in_faction_with = ENG } }
					ENG = { is_faction_leader = yes }
				}
				ENG = { add_to_faction = LEB }
			}
			else_if = {
				limit = {
					NOT = { LEB = { is_in_faction_with = ENG } }
					ENG = { is_in_faction = yes }
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						is_in_faction_with = ENG
					}
					add_to_faction = LEB
				}
			}
			every_country = {
				limit = { 
					has_war_with = LEB
					NOT = { has_war_with = ENG }
				}
				white_peace = LEB
			}
			SYR = {
				transfer_units_fraction = {
					target = LEB
					size = 0.25
					stockpile_ratio = 0.25
					army_ratio = 0.25
					navy_ratio = 0.25
					air_ratio = 0.25
				}
			}
		}

		#UK: gets Libya and East Africa
		ENG = {
			transfer_state = 448
			transfer_state = 449
			transfer_state = 450
			transfer_state = 451
			transfer_state = 663
			transfer_state = 662
			transfer_state = 661
			transfer_state = 273
			transfer_state = 550
			transfer_state = 559
			transfer_state = 807
		}
		#France: usually gets very fucked without this code; Corsica/South France/West Africa
		FRA = {
			transfer_state = 14
			transfer_state = 28
			transfer_state = 31
			transfer_state = 19
			transfer_state = 25
			transfer_state = 33
			transfer_state = 23
			transfer_state = 26
			transfer_state = 22
			transfer_state = 20
			transfer_state = 21
			transfer_state = 32
			transfer_state = 735
			transfer_state = 1
			transfer_state = 462
			transfer_state = 461
			transfer_state = 460
			transfer_state = 459
			transfer_state = 513
			transfer_state = 268
			transfer_state = 543
			transfer_state = 706
			transfer_state = 708
			transfer_state = 539
			transfer_state = 772
			transfer_state = 773
			transfer_state = 660
			transfer_state = 774
			transfer_state = 775
			transfer_state = 515
			transfer_state = 781
			transfer_state = 776
			transfer_state = 777
			transfer_state = 778
			transfer_state = 556
			transfer_state = 779
			transfer_state = 780
			transfer_state = 272
			transfer_state = 557
			transfer_state = 786
			transfer_state = 782
			transfer_state = 514
			transfer_state = 458
			transfer_state = 665
			transfer_state = 806 #Pyrenees
		}
		if = {
			limit = {
				has_global_flag = paris_captured_allies
				NOT = { FRA = { has_government = neutrality } }
			}
			FRA = {
				set_popularities = {
					democratic = 65
					neutrality = 10
					fascism = 5
					communism = 20
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = paris_captured_soviets
			}
			SOV = {
				puppet = FRA
				FRA = {
					set_popularities = {
						democratic = 25
						neutrality = 10
						fascism = 5
						communism = 60
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Netherlands
		if = {
			limit = {
				has_global_flag = amsterdam_captured_allies
				NOT = { HOL = { has_government = neutrality } }
			}
			HOL = {
				set_popularities = {
					democratic = 70
					neutrality = 18
					fascism = 2
					communism = 10
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = amsterdam_captured_soviets
			}
			SOV = {
				puppet = HOL
				HOL = {
					set_popularities = {
						democratic = 30
						neutrality = 18
						fascism = 2
						communism = 50
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Belgium: already code ready for eventual implementation King Leopold/Mil takeover.
		if = {
			limit = {
				has_global_flag = brussels_captured_allies
				NOT = { BEL = { has_government = neutrality } }
			}
			BEL = {
				set_popularities = {
					democratic = 70
					neutrality = 12
					fascism = 3
					communism = 15
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = brussels_captured_soviets
			}
			SOV = {
				puppet = BEL
				BEL = {
					set_popularities = {
						democratic = 26
						neutrality = 20
						fascism = 4
						communism = 50
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Luxemburg
		if = {
			limit = {
				HOL = { has_completed_focus = HOL_revive_the_buffer_state_proposal }
				NOT = { has_global_flag = luxembourg_captured_soviets }
			}
			HOL = { transfer_state = 8 }
		}
		else_if = {
			limit = {
				has_global_flag = luxembourg_captured_allies
			}
			LUX = {
				transfer_state = 8
				set_popularities = {
					democratic = 85
					neutrality = 5
					fascism = 0
					communism = 10
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
			if = {
				limit = {
					LUX = { is_puppet = yes }
				}
				set_autonomy = { target = LUX autonomy_state = autonomy_free }
				if = {
					limit = {
						ENG = { is_faction_leader = yes }
					}
					ENG = { add_to_faction = LUX }
				}
				else_if = {
					limit = {
						ENG = { is_in_faction = yes }
					}
					random_other_country = {
						limit = {
							is_faction_leader = yes
							is_in_faction_with = ENG
						}
						add_to_faction = LUX
					}
				}
				every_country = {
					limit = { 
						has_war_with = LUX
						NOT = { has_war_with = ENG }
					}
					white_peace = LUX
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = luxembourg_captured_soviets
			}
			LUX = { transfer_state = 8 }
			SOV = {
				puppet = LUX
				LUX = {
					set_popularities = {
						democratic = 25
						neutrality = 17
						fascism = 3
						communism = 55
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Italy
		ITA = {
			transfer_state = 39
			transfer_state = 160
			transfer_state = 159
			transfer_state = 158
			transfer_state = 161
			transfer_state = 162
			transfer_state = 157
			transfer_state = 2
			transfer_state = 117
			transfer_state = 156
			transfer_state = 115
			transfer_state = 114
		}
		if = {
			limit = {
				has_global_flag = rome_captured_allies
			}
			USA = {
				puppet = ITA
				set_autonomy = {
    				target = ITA
					autonomy_state = autonomy_supervised_state
				}
				ITA = {
					set_popularities = {
						democratic = 57
						neutrality = 8
						fascism = 7
						communism = 28
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = rome_captured_soviets
			}
			SOV = {
				puppet = ITA
				ITA = {
					set_popularities = {
						democratic = 20
						neutrality = 15
						fascism = 15
						communism = 50
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Albania: TBD event for potential annex into Yugoslavia/Greece (Northern Epirus)?
		ALB = {
			transfer_state = 44
			transfer_state = 805
		}
		if = {
			limit = { 
				has_global_flag = tirana_captured_allies
			}
			USA = {
				puppet = ALB
				set_autonomy = {
    				target = ALB
					autonomy_state = autonomy_supervised_state
				}
				ALB = {
					set_popularities = {
						democratic = 55
						neutrality = 30
						fascism = 0
						communism = 15
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = tirana_captured_soviets
			}
			SOV = {
				puppet = ALB
				ALB = {
					set_popularities = {
						democratic = 10
						neutrality = 25
						fascism = 5
						communism = 60
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#Bulgaria: Dobrudja handled in variation section at end
		if = {
			limit = {
				has_global_flag = sofia_captured_soviets
			}
			BUL = {
				transfer_state = 48
				transfer_state = 212
				transfer_state = 211
				transfer_state = 77
			}
			SOV = {
				puppet = BUL
				BUL = {
					set_popularities = {
						democratic = 13
						neutrality = 17
						fascism = 5
						communism = 65
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					drop_cosmetic_tag = yes					
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = sofia_captured_allies
			}
			BUL = {
				transfer_state = 48
				transfer_state = 212
				transfer_state = 211
				transfer_state = 77
			}
			USA = {
				puppet = BUL
				set_autonomy = {
    					target = BUL
					autonomy_state = autonomy_supervised_state
				}
				BUL = {
					set_popularities = {
						democratic = 55
						neutrality = 30
						fascism = 5
						communism = 10
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
					drop_cosmetic_tag = yes
				}
			}
		}
		#Romania: TBD later addon Transylvania & Dobrudja options
		if = {
			limit = {
				OR = {
					has_global_flag = bucharest_captured_soviets
					ROM = { has_completed_focus = ROM_king_michaels_coup }
				}
			}
			ROM = {
				transfer_state = 46
				transfer_state = 79
				transfer_state = 84
				transfer_state = 83
				transfer_state = 82
				transfer_state = 81
				transfer_state = 76
				add_state_core = 76
			}
			SOV = {
				puppet = ROM
				ROM = {
					set_popularities = {
						democratic = 15
						neutrality = 20
						fascism = 5
						communism = 60
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = bucharest_captured_allies
			}
			ROM = {
				transfer_state = 46
				transfer_state = 79
				transfer_state = 84
				transfer_state = 83
				transfer_state = 82
				transfer_state = 81
				transfer_state = 76
				add_state_core = 76
			}
			USA = {
				puppet = ROM
				set_autonomy = {
    					target = ROM
					autonomy_state = autonomy_supervised_state
				}
				ROM = {
					set_popularities = {
						democratic = 57
						neutrality = 23
						fascism = 7
						communism = 13
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		#Hungary: TBD later addon Transylvania options / KUK
		if = {
			limit = {
				has_global_flag = budapest_captured_soviets
			}
			HUN = {
				transfer_state = 43
				transfer_state = 154
				transfer_state = 155
			}
			SOV = {
				puppet = HUN
				HUN = {
					set_popularities = {
						democratic = 15
						neutrality = 17
						fascism = 8
						communism = 60
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = budapest_captured_allies
			}
			HUN = {
				transfer_state = 43
				transfer_state = 154
				transfer_state = 155
			}
			USA = {
				puppet = HUN
				set_autonomy = {
    					target = HUN
					autonomy_state = autonomy_supervised_state
				}
				HUN = {
					set_popularities = {
						democratic = 70
						neutrality = 10
						fascism = 5
						communism = 15
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		#Czechoslovakia
		every_state = {
			limit = {
				OR = {
					state = 9
					state = 69
					state = 70
					state = 71
					state = 72
					state = 74
					state = 75
					state = 664
				}
			}
			CZE = {
				add_state_core = PREV
				transfer_state = PREV
				drop_cosmetic_tag = yes #Czech Republic
			}
		}
		if = {
			limit = {
				has_global_flag = prague_captured_soviets
			}
			SOV = {
				puppet = CZE
				CZE = {
					set_popularities = {
						democratic = 40
						neutrality = 10
						fascism = 2
						communism = 48
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = prague_captured_allies
			}
			USA = {
				puppet = CZE
				set_autonomy = {
    					target = CZE
					autonomy_state = autonomy_supervised_state
				}
				CZE = {
					set_popularities = {
						democratic = 80
						neutrality = 10
						fascism = 0
						communism = 10
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		#Soviet gainzz
		every_state = {
			limit = {
				OR = {
					state = 73
					state = 80
					state = 89
					state = 91
					state = 93
					state = 94
					state = 95
					state = 96
					state = 763
					state = 766
				}
			}
			SOV = {
				add_state_core = PREV
				transfer_state = PREV
				transfer_state = 78
				transfer_state = 188
				transfer_state = 784
			}
		}
		#Austria
		AUS = {
			transfer_state = 153
			transfer_state = 152
			transfer_state = 4
		}
		if = {
			limit = {
				OR = {
					has_global_flag = paris_captured_soviets
					has_global_flag = rome_captured_soviets
				}
			}
			SOV = {
				puppet = AUS
				AUS = {
					set_popularities = {
						democratic = 25
						neutrality = 10
						fascism = 10
						communism = 55
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					AUS = { is_puppet = yes }
				}
				set_autonomy = { target = AUS autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					AUS = { is_in_faction = yes }
				}
				AUS = { leave_faction = yes }
				every_country = {
					limit = { has_war_with = AUS }
					white_peace = AUS
				}
			}
			AUS = {
				set_popularities = {
					democratic = 85
					neutrality = 0
					fascism = 0
					communism = 15
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
				add_ideas = neutrality_idea
				add_ideas = disarmed_nation
				add_ideas = civilian_economy
				set_rule = {
					can_join_factions = no 
					can_create_factions = no
					can_not_declare_war = yes
				}
			}
		}
		#Finland & SOV cores on gained FIN-land ;-)
		if = {
			limit = {
				OR = {
					AND = {
						FIN = { has_completed_focus = FIN_preparerevenge }
						NOT = { FIN = { has_completed_focus = FIN_lappland } }
					}
					FIN = { has_completed_focus = FIN_greater2 }
					has_global_flag = paris_captured_soviets
					has_global_flag = Amsterdam_captured_soviets
				}
			}
			SOV = {
				puppet = FIN
				FIN = {
					set_popularities = {
						democratic = 15
						neutrality = 20
						fascism = 12
						communism = 53
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					FIN = { is_puppet = yes }
				}
				set_autonomy = { target = FIN autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					FIN = { is_in_faction = yes }
				}
				FIN = { leave_faction = yes }
				every_country = {
					limit = { has_war_with = FIN }
					white_peace = FIN
				}
			}
			FIN = {
				add_ideas = neutrality_idea
				add_ideas = disarmed_nation
				add_ideas = civilian_economy
				set_rule = {
					can_join_factions = no 
					can_create_factions = no
				}
			}
		}
		if = {
			limit = {
				OR = {
					SOV = { owns_state = 722 }
					FIN = { is_puppet_of = SOV }
				}
			}
			SOV = {
				add_state_core = 722
				add_state_core = 146
				add_state_core = 147
			}
		}
		#Denmark
		if = {
			limit = {
				OR = {
					has_global_flag = paris_captured_soviets
					has_global_flag = amsterdam_captured_soviets
				}
			}
			SOV = {
				puppet = DEN
				DEN = {
					set_popularities = {
						democratic = 28
						neutrality = 10
						fascism = 2
						communism = 60
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else_if = {
			limit = {
				DEN = { is_puppet = yes }
			}
			set_autonomy = { target = DEN autonomy_state = autonomy_free }
			if = {
				limit = {
					ENG = { is_faction_leader = yes }
				}
				ENG = { add_to_faction = DEN }
			}
			else_if = {
				limit = {
					ENG = { is_in_faction = yes }
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						is_in_faction_with = ENG
					}
					add_to_faction = DEN
				}
			}
			every_country = {
				limit = { 
					has_war_with = DEN
					NOT = { has_war_with = ENG }
				}
				white_peace = DEN
			}
			DEN = {
				set_popularities = {
					democratic = 85
					neutrality = 0
					fascism = 0
					communism = 15
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
		}
		#Norway
		if = {
			limit = {
					has_global_flag = paris_captured_soviets
					has_global_flag = amsterdam_captured_soviets
			}
			SOV = {
				puppet = NOR
				NOR = {
					set_popularities = {
						democratic = 25
						neutrality = 10
						fascism = 2
						communism = 63
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else_if = {
			limit = {
				NOR = { is_puppet = yes }
			}
			set_autonomy = { target = NOR autonomy_state = autonomy_free }
			if = {
				limit = {
					ENG = { is_faction_leader = yes }
				}
				ENG = { add_to_faction = NOR }
			}
			else_if = {
				limit = {
					ENG = { is_in_faction = yes }
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						is_in_faction_with = ENG
					}
					add_to_faction = NOR
				}
			}
			every_country = {
				limit = {
					has_war_with = NOR
					NOT = { has_war_with = ENG }
				}
				white_peace = NOR
			}
			NOR = {
				set_popularities = {
					democratic = 85
					neutrality = 0
					fascism = 0
					communism = 15
				}
				set_politics = {
					ruling_party = democratic
					election_frequency = 48
					elections_allowed = yes
				}
			}
		}
		#East Germany
		every_state = {
			limit = {
				OR = {
					state = 60
					state = 61
					state = 62
					state = 64
					state = 65
				}
			}
			DDR = {
				transfer_state = PREV
				add_state_core = PREV
				add_timed_idea = {
					idea = denazification
						days = 1200
				}
				add_ideas = disarmed_nation
				add_ideas = civilian_economy
			}
		}
		if = {
			limit = {
				has_global_flag = warsaw_captured_allies
				has_global_flag = prague_captured_allies
			}
			USA = {
				puppet = DDR
				set_autonomy = {
    					target = DDR
					autonomy_state = autonomy_supervised_state
				}
				DDR = {
					set_popularities = {
						democratic = 85
						neutrality = 5
						fascism = 0
						communism = 10
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		else = {
			SOV = {
				puppet = DDR
				DDR = {
					set_popularities = {
						democratic = 12
						neutrality = 8
						fascism = 10
						communism = 70
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		#West Germany
		every_state = {
			limit = {
				OR = {
					state = 42
					state = 50
					state = 51
					state = 52
					state = 53
					state = 54
					state = 55
					state = 56
					state = 57
					state = 58
					state = 59
				}
			}
			WGR = {
				transfer_state = PREV
				add_state_core = PREV
				add_timed_idea = { #also Western Occupation Zone contributed to SOV reparations
					idea = denazification
						days = 1200
				}
				add_ideas = disarmed_nation
				add_ideas = civilian_economy
			}
		}
		if = {
			limit = {
				has_global_flag = paris_captured_soviet
			}
			SOV = {
				puppet = WGR
				WGR = {
					set_popularities = {
						democratic = 20
						neutrality = 15
						fascism = 15
						communism = 50
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}
		else = {
			USA = {
				puppet = WGR
				set_autonomy = {
    					target = WGR
					autonomy_state = autonomy_supervised_state
				}
				WGR = {
					set_popularities = {
						democratic = 80
						neutrality = 5
						fascism = 2
						communism = 13
					}
					set_politics = {
						ruling_party = democratic
						election_frequency = 48
						elections_allowed = yes
					}
				}
			}
		}
		#Poland
		every_state = {
			limit = {
				OR = {
					state = 5
					state = 10
					state = 63
					state = 66
					state = 67
					state = 68
					state = 85
					state = 86
					state = 87
					state = 88
					state = 90
					state = 97
					state = 98
					state = 762
				}
			}
			POL = {
				transfer_state = PREV
				add_state_core = PREV
			}
		}
		if = {
			limit = {
				OR = {
					has_global_flag = warsaw_captured_soviets
					has_global_flag = prague_captured_soviets
				}
			}
			SOV = {
				puppet = POL
				POL = {
					set_popularities = {
						democratic = 22
						neutrality = 18
						fascism = 7
						communism = 53
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}
			}
		}

		###Greece: Add Greek Civil War later // Make event for Thrace & Macedonia
		every_state = {
			limit = {
				OR = {
					state = 47
					state = 182
					state = 184
					state = 185
					state = 186
					state = 187
					state = 731
				}
			}
			GRE = {
				transfer_state = PREV
				add_state_core = PREV
			}
		}
		if = {
			limit = {
				has_global_flag = athens_captured_soviets
			}
			SOV = {
				puppet = GRE
				GRE = {
					set_popularities = {
						democratic = 20
						neutrality = 20
						fascism = 5
						communism = 55
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					if = {
						limit = {
							NOT = { has_completed_focus = GRE_tow_the_stalinist_line }
						}
						drop_cosmetic_tag = yes
						add_political_power = -50
						complete_national_focus = GRE_tow_the_stalinist_line
					}
				}
			}
		}
		#Yugoslavia
		every_state = {
			limit = {
				OR = {
					state = 45
					state = 102
					state = 103
					state = 104
					state = 105
					state = 106
					state = 107
					state = 108
					state = 109
					state = 163
					state = 736
					state = 764
					state = 802
					state = 803
					state = 804
					state = 813
				}
			}
			YUG = {
				transfer_state = PREV
				add_state_core = PREV
				load_oob = "YUG_AI_reinforce"
			}
		}
		#Ethiopia
		ETH = {
			transfer_state = 271
			transfer_state = 713
			transfer_state = 550
			add_state_claim = 550
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_popularities = {
				democratic = 8
				neutrality = 82
				fascism = 5
				communism = 5
			}
			if = {
				limit = {
					ETH = {
						num_divisions < 5
					}
				}
				load_oob = YUG_1936
			}
		}
		if = {
			limit = {
				ETH = { is_puppet = yes }
			}
			set_autonomy = { target = ETH autonomy_state = autonomy_free }
		}
		if = {
			limit = {
				NOT = { ETH = { is_in_faction_with = ENG } }
				ENG = { is_faction_leader = yes }
			}
			ENG = { add_to_faction = ETH }
		}
		else_if = {
			limit = {
				NOT = { ETH = { is_in_faction_with = ENG } }
				ENG = { is_in_faction = yes }
			}
			random_other_country = {
				limit = {
					is_faction_leader = yes
					is_in_faction_with = ENG
				}
				add_to_faction = ETH
			}
		}
		every_country = {
			limit = {
				has_war_with = ETH
				NOT = { has_war_with = ENG }
			}
			white_peace = ETH
		}
		###Some variations & alt-hist cover--> Make some into events later on etc...###
		
		if = {
			limit = {
				any_country = {
					original_tag = SPR
					is_puppet = yes
				}
				FRA = { is_puppet = no }
			}
			FRA = {
				transfer_state = 297
				transfer_state = 290
				transfer_state = 699
				transfer_state = 783
				transfer_state = 178
			}
		}

		###Removing Cores###
		every_state = {
			limit = {
				OR = {
					is_core_of = GER
					is_claimed_by = GER
				}
				NOT = {
					OR = {
						is_core_of = DDR 
						is_core_of = WGR
						is_core_of = POL
						is_core_of = SOV
					}
				}
			}
			remove_core_of = GER
			remove_claim_by = GER
		}
		every_state = {
			limit = {
				is_core_of = BUL
				NOT = { is_owned_by = BUL }
			}
			remove_core_of = BUL
			add_claim_by = BUL
		}
		every_state = {
			limit = {
				is_core_of = HUN
				NOT = { is_owned_by = HUN }
			}
			remove_core_of = HUN
			add_claim_by = HUN
		}
		every_state = {
			limit = {
				is_core_of = ITA
				NOT = { is_owned_by = ITA }
			}
			remove_core_of = ITA
			add_claim_by = ITA
		}
	}
}